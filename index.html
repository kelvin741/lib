<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Library Catalogue System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- LOGIN PAGE -->
    <div id="loginPage" class="auth-container">
        <div class="auth-box">
            <h1>ðŸ“š Digital Library</h1>
            <h2>Login</h2>
            <input id="lemail" type="email" placeholder="ðŸ“§ Email Address" required>
            <input id="lpassword" type="password" placeholder="ðŸ” Password" required>
            <button class="btn-primary" onclick="login()">Login</button>
            <p class="auth-link">No account? <a href="#" onclick="showRegister(); return false;">Register here</a></p>
        </div>
    </div>

    <!-- REGISTER PAGE -->
    <div id="registerPage" class="auth-container" style="display:none;">
        <div class="auth-box">
            <h1>ðŸ“š Digital Library</h1>
            <h2>Create Account</h2>
            <input id="name" type="text" placeholder="ðŸ‘¤ Full Name" required>
            <input id="email" type="email" placeholder="ðŸ“§ Email Address" required>
            <input id="password" type="password" placeholder="ðŸ” Password" required>
            
            <select id="role" required>
                <option value="">-- Select Role --</option>
                <option value="student">Student</option>
                <option value="admin">Admin</option>
            </select>

            <button class="btn-primary" onclick="register()">Register</button>
            <p class="auth-link">Have an account? <a href="#" onclick="showLogin(); return false;">Login here</a></p>
        </div>
    </div>

    <!-- STUDENT DASHBOARD -->
    <div id="dashboard" style="display:none;">
        <header class="navbar">
            <div class="nav-left">
                <h1>ðŸ“š Digital Library</h1>
                <p id="welcomeMsg"></p>
            </div>
            <button class="btn-logout" onclick="logout()">Logout</button>
        </header>

        <main class="container">
            <!-- SEARCH & FILTER SECTION -->
            <section class="search-section">
                <h2>Search & Filter Books</h2>
                <div class="search-box">
                    <input id="search" type="text" placeholder="ðŸ” Search by title, author, or category...">
                    <button class="btn-search" onclick="searchBooks()">Search</button>
                </div>
            </section>

            <!-- BOOK CATALOGUE SECTION - REQUIREMENT: Display all books with title, author, and availability -->
            <section class="books-section">
                <h2>Available Books</h2>
                <div id="bookList" class="books-grid"></div>
            </section>

            <!-- BORROWED BOOKS SECTION - REQUIREMENT: Track borrowed books with due dates -->
            <section class="borrowed-section">
                <h2>My Borrowed Books</h2>
                <div id="my" class="borrowed-grid"></div>
            </section>
        </main>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" style="display:none;">
        <header class="navbar">
            <div class="nav-left">
                <h1>ðŸ“š Digital Library Admin</h1>
                <p id="adminWelcome"></p>
            </div>
            <button class="btn-logout" onclick="logout()">Logout</button>
        </header>

        <main class="container">
            <!-- ADD BOOK SECTION - REQUIREMENT: Admin users can add, update, or delete books -->
            <section class="add-book-section">
                <h2>Add New Book</h2>
                <div class="form-box">
                    <input id="title" type="text" placeholder="ðŸ“– Book Title" required>
                    <input id="author" type="text" placeholder="âœï¸ Author Name" required>
                    <input id="isbn" type="text" placeholder="ðŸ“š ISBN" required>
                    <input id="category" type="text" placeholder="ðŸ·ï¸ Category" required>
                    <button class="btn-primary" onclick="addBook()">+ Add Book</button>
                </div>
            </section>

            <!-- ALL BOOKS MANAGEMENT SECTION -->
            <section class="books-section">
                <h2>Manage Books</h2>
                <div id="bookListAdmin" class="books-grid"></div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>

    <script>
        // Page Navigation
        function showRegister(){ 
            loginPage.style.display="none"; 
            registerPage.style.display="block"; 
        }
        function showLogin(){ 
            registerPage.style.display="none"; 
            loginPage.style.display="block"; 
        }

        // Auto-load dashboard if user is logged in
        if(localStorage.user){ 
            let u = JSON.parse(localStorage.user);
            if(u.role=="admin") loadAdmin();
            else loadStudent();
        }

        // Logout function
        function logout(){
            if(confirm("Are you sure you want to logout?")) {
                localStorage.removeItem("user");
                localStorage.removeItem("token");
                location.reload();
            }
        }

        // Allow Enter key to submit forms
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('keypress', (e) => {
                    if(e.key === 'Enter') {
                        if(input === document.getElementById('lemail') || input === document.getElementById('lpassword')) {
                            login();
                        } else if(input === document.getElementById('email') || input === document.getElementById('password')) {
                            register();
                        } else if(input === document.getElementById('search')) {
                            searchBooks();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
